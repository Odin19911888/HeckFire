@using System.Data.Entity.Core.Objects
@using System.Web.Mvc.Html
@using System.Xml.Schema
@model  Calculator.Models.MainModel

@{
    ViewBag.Title = "Main";
}

<link rel="stylesheet" type="text/css" href="~/Content/HeckFire.css">
<html>
<header>
    HeckFire Calculator
</header>

<body>
<div id="main-wrap">
    <div id="sidebar">
        @{
            AjaxOptions options = new AjaxOptions();
            options.HttpMethod = "POST";
            options.UpdateTargetId = "textResult";
            options.InsertionMode = InsertionMode.Replace;
        }
        <div class="control" id="getCurrentAndNext">
            @using (Ajax.BeginForm("Calculate", "HeckFire", options))
            {
                <button name="Function" type="submit" value="GetCurrentQuest">Current</button>
                <button name="Function" type="submit" value="GetNextQuest">Next</button>
            }

        </div>
        <div class="control" id="getTimeWhenOrUntilNext">
            @using (Ajax.BeginForm("Calculate", "HeckFire", options))
            {
                @Html.LabelFor(model => model.Quest)
                @Html.EnumDropDownListFor(model => model.Quest)
                <button name="Function" value="GetTimeWhenNext" type="submit">Next start time</button>
                <button name="Function" value="GetTimeUntilNext" type="submit">Time until starts</button>
            }
        </div>
        <div class="control" id="getQuestAfterHours">
            @using (Ajax.BeginForm("Calculate", "HeckFire", options))
            {
                @Html.LabelFor(model => model.Hours)
                @Html.TextBoxFor(model => model.Hours, new {autocomplete = "off"})
                <button name="Function" value="GetQuestAfterHours" type="submit">Quest after given hours</button>
            }
        </div>
        <div class="control" id="getQuestList">
           @using (Ajax.BeginForm("Calculate", "HeckFire", new AjaxOptions
           {
               HttpMethod = "POST",
               UpdateTargetId = "list",
               InsertionMode = InsertionMode.Replace
           }))
           { 
                @Html.LabelFor(model => model.QuestListLength)
                @Html.TextBoxFor(model => model.QuestListLength, new {autocomplete = "off"})
                <button name="Function" value="GetQuestList" type="submit">Quest list</button>
            }
        </div>
    </div>
    <div id="resultDiv">
        <div class="result" id="resultText">
            <label>Result:</label>
            <br/>
            <p id="textResult">@Model.Result</p>
        </div>
        <div class="result" id="questList">
            <label>Quest list:</label>
            <br/>
            <span style="white-space: pre-line"><p id="list">@Model.QuestList</p></span>
        </div>
    </div>
</div>
@Scripts.Render("~/bundles/jquery")
<script type="text/javascript">
    document.getElementById("list").innerHTML = Model.Quest;
</script> 
</body>
</html>